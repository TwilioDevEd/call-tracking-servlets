<!DOCTYPE html><html><head><title>Call Tracking</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Call Tracking"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Call Tracking</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Use Twilio to track the effectiveness of your marketing campaigns. Let's get started!</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Call Tracking with Twilio and Java Servlets" class="chapter"><div data-file="src/main/webapp/WEB-INF/web.xml" data-format="xml" class="step"><h2 id="what-does-this-thing-do-">What does this thing do?</h2>
<p>This Java Servlets + <a href="//github.com/gradle/gradle">Gradle</a> +
<a href="//docs.gradle.org/current/userguide/userguide_single.html#jetty_plugin">Jetty</a>
web application shows how you can
use Twilio to track the effectiveness of different marketing channels.</p>
<p><img src="//howtodocs.s3.amazonaws.com/call-tracking-home.png" alt="Call tracking home page"></p>
<p>This application has three main features:</p>
<ul>
<li>It purchases phone numbers from Twilio to use in different marketing
campaigns (like a billboard or a bus advertisement)</li>
<li>It forwards incoming calls for those phone numbers to a salesperson</li>
<li>It displays charts showing data about the phone numbers and the calls
they receive</li>
</ul>
<p>In this tutorial, we&#39;ll point out the key bits of code that make this
application work.
<a href="https://github.com/twiliodeved/call-tracking-servlets">Check out the project README on
GitHub</a>
to see how to run the code yourself.</p>
<p>Let&#39;s get started! Click the right arrow above to advance to the next
code snippet.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/java/install">Twilio Java helper library</a></li>
<li><a href="https://www.twilio.com/docs/api">Twilio REST API docs</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnafd.html">Getting Started with Java Servlets</a></li>
<li><a href="//gradle.org/getting-started-gradle-java/">Getting Started with Gradle Java/JVM</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-highlight="34-41" class="step"><h2 id="search-for-available-phone-numbers">Search for available phone numbers</h2>
<p>Call tracking requires us to search for and buy phone numbers on demand,
associating a specific phone number with a lead source. This class
uses the <a href="//www.twilio.com/docs/java/install">Twilio Java Helper
Library</a>
to search for phone numbers by area code and return a list of numbers
that are available for purchase.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/api/rest/available-phone-numbers#local-get-basic-example-1">Searching for and buying numbers in Java</a></li>
<li><a href="https://www.twilio.com/docs/api/rest/available-phone-numbers">Twilio REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/phonenumbers/AvailableServlet.java" data-highlight="24-34" class="step"><h2 id="display-available-phone-numbers">Display available phone numbers</h2>
<p>We display a form to the user on the app&#39;s home page which allows them to
search for a new phone number by area code. At the controller level we use the
<code>TwilioServices</code> instances we created earlier to actually search for numbers. This
will render the view that contains a list of numbers they can choose to buy.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/howto/search-and-buy">Phone Number Search
API</a></li>
<li><a href="http://twilio.github.io/twilio-java/">Twilio JavaDocs</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-highlight="43-56" class="step"><h2 id="buy-a-phone-number">Buy a phone number</h2>
<p>Our <code>purchasePhoneNumber</code> method takes a phone number as its
sole parameter and uses our Twilio API client to purchase the
available phone number our user chooses.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/api/rest/available-phone-numbers">Twilio REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/leadsources/CreateServlet.java" data-highlight="32-52" class="step"><h2 id="associate-a-phone-number-with-a-lead-source">Associate a phone number with a lead source</h2>
<p>Once we search for and buy a Twilio number, we need to associate it with a
lead source in our database. This is the core of a call tracking application.
Any phone calls to our new Twilio number will be attributed to this source.</p>
</div><div data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" class="step"><h2 id="the-leadsource-model">The LeadSource model</h2>
<p>The <code>LeadSource</code> model associates a Twilio number to a named lead source
(like &quot;Wall Street Journal Ad&quot; or &quot;Dancing guy with sign&quot;). It also tracks
a phone number to which we&#39;d like all the calls redirected, like your sales
or support help line.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//flywaydb.org/documentation/gradle/migrate.html">Executing Flyway Migrations with Gradle</a></li>
<li><a href="//docs.oracle.com/javase/tutorial/jdbc/basics/index.html">JDBC Basics</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html">JPA Entities Definition</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh">JPA Entities Relations</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" class="step"><h2 id="the-lead-model">The Lead model</h2>
<p>A <code>Lead</code> represents a phone call generated by a <code>LeadSource</code>. Each time
somebody calls a phone number associated with a <code>LeadSource</code>, we&#39;ll use the <code>Lead</code> model to
record some of the <a href="https://www.twilio.com/docs/api/twiml/twilio_request">data Twilio gives us</a>
about their call.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh">JPA Entities Relations</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/calltracking/LeadCallServlet.java" data-highlight="32-51" class="step"><h2 id="forward-calls-and-create-leads">Forward calls and create leads</h2>
<p>Whenever a customer calls one of our Twilio numbers, Twilio will send a POST
request to the URL associated with this action (should be
<code>/lead</code>).</p>
<p>We use the incoming call data to create a new <code>Lead</code> for a <code>LeadSource</code>,
then return <a href="https://www.twilio.com/docs/api/twiml">TwiML</a> that connects our caller
with the <code>forwardingNumber</code> of our <code>LeadSource</code>.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="https://www.twilio.com/docs/api/twiml/twilio_request">Twilio voice request parameters</a></li>
<li><a href="//www.twilio.com/docs/quickstart/java/sms/hello-monkey">Twilio&#39;s TwiML</a></li>
<li><a href="https://www.twilio.com/docs/api/twiml/dial">TwiML &lt;Dial&gt; verb</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/repositories/LeadSourceRepository.java" data-highlight="29-41" class="step"><h2 id="get-statistics-about-our-lead-sources">Get statistics about our lead sources</h2>
<p>One useful statistic we can <a href="//github.com/TwilioDevEd/call-tracking-servlets/blob/a09ece1216927eb866f2f1fc63a542bbdb5274ed/src/main/java/com/twilio/calltracking/servlets/stats/LeadsBySourceServlet.java#L23-L27">get from our data</a>
is how many calls each
<code>LeadSource</code> has received. We query over <code>LeadSource</code> and count its <code>Lead</code> models.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.objectdb.com/java/jpa/query/jpql/group">Group Elements in a JPA Query</a></li>
</ul>
</div><div data-file="src/main/webapp/scripts/call-tracking.js" class="step"><h2 id="visualize-our-statistics-with-chart-js">Visualize our statistics with Chart.js</h2>
<p>Back on the home page, we fetch call tracking statistics
<a href="https://github.com/TwilioDevEd/call-tracking-servlets/blob/a09ece1216927eb866f2f1fc63a542bbdb5274ed/src/main/java/com/twilio/calltracking/servlets/WebAppServlet.java#L30-L36">in JSON from the
server</a>
using <a href="//www.mkyong.com/java/jackson-2-convert-java-object-to-from-json/">Jackson/ObjectMapper</a>
and <a href="https://api.jquery.com/jquery.get/">jQuery</a>.
We display the stats in colorful pie charts we create with <a href="http://www.chartjs.org/">Chart.js</a>.</p>
<p><img src="//howtodocs.s3.amazonaws.com/call-tracking-charts.png" alt="Call tracking charts"></p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="http://www.chartjs.org/">Chart.js</a></li>
</ul>
</div><div data-file="src/main/webapp/scripts/call-tracking.js" class="step"><h2 id="where-to-next-">Where to next?</h2>
<p>That&#39;s it! Our Java Servlet application is now ready to purchase new phone
numbers, forward incoming calls, and record some statistics for our
business.</p>
<p>If you&#39;re a Java developer working with Twilio, you might enjoy these
other tutorials:</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/server-notifications/java/servlets"><strong>SMS and MMS notifications</strong></a></p>
<p>Build a server notification system that will alert all administrators via SMS when a server outage occurs.</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/click-to-call/java/servlets"><strong>Click To Call</strong></a></p>
<p>Convert web traffic into phone calls with the click of a button.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking out this tutorial! If you have any feedback to share
with us, we&#39;d love to hear it. Tweet
<a href="http://twitter.com/twilio">@twilio</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="src/main/webapp/WEB-INF/web.xml" data-mode="xml">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCgo8d2ViLWFwcCB4bWxucz0iaHR0cDovL2phdmEuc3VuLmNvbS94bWwvbnMvamF2YWVlIgogICAgICAgICB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIgogICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly9qYXZhLnN1bi5jb20veG1sL25zL2phdmFlZSBodHRwOi8vamF2YS5zdW4uY29tL3htbC9ucy9qYXZhZWUvd2ViLWFwcF8zXzAueHNkIgogICAgICAgICB2ZXJzaW9uPSIzLjAiPgoKICAgIDxjb250ZXh0LXBhcmFtPgogICAgICAgIDxwYXJhbS1uYW1lPmpzcC1pbmhlcml0YW5jZS1wcmVmaXg8L3BhcmFtLW5hbWU+CiAgICAgICAgPHBhcmFtLXZhbHVlPi9XRUItSU5GL2xheW91dHMvPC9wYXJhbS12YWx1ZT4KICAgIDwvY29udGV4dC1wYXJhbT4KCiAgICA8Y29udGV4dC1wYXJhbT4KICAgICAgICA8cGFyYW0tbmFtZT5qc3AtaW5oZXJpdGFuY2Utc3VmZml4PC9wYXJhbS1uYW1lPgogICAgICAgIDxwYXJhbS12YWx1ZT4uanNwPC9wYXJhbS12YWx1ZT4KICAgIDwvY29udGV4dC1wYXJhbT4KCiAgICA8d2VsY29tZS1maWxlLWxpc3Q+CiAgICAgICAgPHdlbGNvbWUtZmlsZT5hdmFpbGFibGVfcGhvbmVfbnVtYmVycy5qc3A8L3dlbGNvbWUtZmlsZT4KICAgIDwvd2VsY29tZS1maWxlLWxpc3Q+CiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPmF2YWlsYWJsZS1waG9uZS1udW1iZXJzPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMucGhvbmVudW1iZXJzLkF2YWlsYWJsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+CiAgICA8L3NlcnZsZXQ+CgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5kYXNoYm9hcmQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5EYXNoYm9hcmRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgoKICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+Y2FsbHRyYWNraW5nLWZvcndhcmRjYWxsPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMuY2FsbHRyYWNraW5nLkxlYWRDYWxsU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPmxlYWQtc291cmNlcy1jcmVhdGU8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlcy5DcmVhdGVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgoKICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+bGVhZC1zb3VyY2VzLWVkaXQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlcy5FZGl0U2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPnN0YXRzLWxlYWRzLWNpdHk8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5zdGF0cy5MZWFkc0J5Q2l0eVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+CiAgICA8L3NlcnZsZXQ+CgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5zdGF0cy1sZWFkcy1zb3VyY2U8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5zdGF0cy5MZWFkc0J5U291cmNlU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldC1tYXBwaW5nPgogICAgICAgIDxzZXJ2bGV0LW5hbWU+ZGVmYXVsdDwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vc2NyaXB0cy8qPC91cmwtcGF0dGVybj4KICAgICAgICA8dXJsLXBhdHRlcm4+L2Nzcy8qPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5hdmFpbGFibGUtcGhvbmUtbnVtYmVyczwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vPC91cmwtcGF0dGVybj4KICAgICAgICA8dXJsLXBhdHRlcm4+L3Bob25lLW51bWJlcnM8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPmRhc2hib2FyZDwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vZGFzaGJvYXJkPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5jYWxsdHJhY2tpbmctZm9yd2FyZGNhbGw8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWQ8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPmxlYWQtc291cmNlcy1jcmVhdGU8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWRzb3VyY2VzL2NyZWF0ZTwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KCiAgICA8c2VydmxldC1tYXBwaW5nPgogICAgICAgIDxzZXJ2bGV0LW5hbWU+bGVhZC1zb3VyY2VzLWVkaXQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWRzb3VyY2VzL2VkaXQ8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPnN0YXRzLWxlYWRzLWNpdHk8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3N0YXRzL2NpdHk8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5zdGF0cy1sZWFkcy1zb3VyY2U8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3N0YXRzL3NvdXJjZTwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KPC93ZWItYXBwPgo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5saWIuc2VydmljZXM7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubGliLkNvbmZpZzsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLlR3aWxpb1Jlc3RDbGllbnQ7CmltcG9ydCBjb20udHdpbGlvLnNkay5Ud2lsaW9SZXN0RXhjZXB0aW9uOwppbXBvcnQgY29tLnR3aWxpby5zZGsucmVzb3VyY2UuZmFjdG9yeS5JbmNvbWluZ1Bob25lTnVtYmVyRmFjdG9yeTsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnJlc291cmNlLmluc3RhbmNlLkFjY291bnQ7CmltcG9ydCBjb20udHdpbGlvLnNkay5yZXNvdXJjZS5pbnN0YW5jZS5BcHBsaWNhdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnJlc291cmNlLmluc3RhbmNlLkF2YWlsYWJsZVBob25lTnVtYmVyOwppbXBvcnQgY29tLnR3aWxpby5zZGsucmVzb3VyY2UuaW5zdGFuY2UuSW5jb21pbmdQaG9uZU51bWJlcjsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnJlc291cmNlLmxpc3QuQXBwbGljYXRpb25MaXN0OwppbXBvcnQgY29tLnR3aWxpby5zZGsucmVzb3VyY2UubGlzdC5BdmFpbGFibGVQaG9uZU51bWJlckxpc3Q7CmltcG9ydCBvcmcuYXBhY2hlLmh0dHAuTmFtZVZhbHVlUGFpcjsKaW1wb3J0IG9yZy5hcGFjaGUuaHR0cC5tZXNzYWdlLkJhc2ljTmFtZVZhbHVlUGFpcjsKCmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkhhc2hNYXA7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKaW1wb3J0IGphdmEudXRpbC5NYXA7CgpAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikgcHVibGljIGNsYXNzIFR3aWxpb1NlcnZpY2VzIHsKCiAgICBwcml2YXRlIGZpbmFsIFR3aWxpb1Jlc3RDbGllbnQgY2xpZW50OwogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIERlZmF1bHRBcHBOYW1lID0gIkNhbGwgdHJhY2tpbmcgYXBwIjsKCiAgICBwdWJsaWMgVHdpbGlvU2VydmljZXMoKSB7CiAgICAgICAgY2xpZW50ID0gbmV3IFR3aWxpb1Jlc3RDbGllbnQoQ29uZmlnLmdldEFjY291bnRTaWQoKSwgQ29uZmlnLmdldEF1dGhUb2tlbigpKTsKICAgIH0KCiAgICBwdWJsaWMgVHdpbGlvU2VydmljZXMoVHdpbGlvUmVzdENsaWVudCBjbGllbnQpIHsKICAgICAgICB0aGlzLmNsaWVudCA9IGNsaWVudDsKICAgIH0KCiAgICBwdWJsaWMgTGlzdDxBdmFpbGFibGVQaG9uZU51bWJlcj4gc2VhcmNoUGhvbmVOdW1iZXJzKFN0cmluZyBhcmVhQ29kZSkgewogICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gc2VhcmNoUGFyYW1zID0gbmV3IEhhc2hNYXA8PigpOwogICAgICAgIHNlYXJjaFBhcmFtcy5wdXQoIkFyZWFDb2RlIiwgYXJlYUNvZGUpOwoKICAgICAgICBBdmFpbGFibGVQaG9uZU51bWJlckxpc3QgcGhvbmVOdW1iZXJzOwogICAgICAgIHBob25lTnVtYmVycyA9IGdldEFjY291bnQoKS5nZXRBdmFpbGFibGVQaG9uZU51bWJlcnMoc2VhcmNoUGFyYW1zLCAiVVMiLCAiTG9jYWwiKTsKICAgICAgICByZXR1cm4gcGhvbmVOdW1iZXJzLmdldFBhZ2VEYXRhKCk7CiAgICB9CgogICAgcHVibGljIEluY29taW5nUGhvbmVOdW1iZXIgcHVyY2hhc2VQaG9uZU51bWJlcihTdHJpbmcgcGhvbmVOdW1iZXIsIFN0cmluZyBhcHBsaWNhdGlvblNpZCkgewogICAgICAgIHRyeSB7CiAgICAgICAgICAgIE1hcDxTdHJpbmcsIFN0cmluZz4gYnV5UGFyYW1zID0gbmV3IEhhc2hNYXA8PigpOwogICAgICAgICAgICBidXlQYXJhbXMucHV0KCJQaG9uZU51bWJlciIsIHBob25lTnVtYmVyKTsKICAgICAgICAgICAgYnV5UGFyYW1zLnB1dCgiVm9pY2VBcHBsaWNhdGlvblNpZCIsIGFwcGxpY2F0aW9uU2lkKTsKICAgICAgICAgICAgZ2V0QWNjb3VudCgpLmdldEluY29taW5nUGhvbmVOdW1iZXJGYWN0b3J5KCkuY3JlYXRlKGJ1eVBhcmFtcyk7CgogICAgICAgICAgICByZXR1cm4gZ2V0SW5jb21pbmdQaG9uZU51bWJlckZhY3RvcnkoKS5jcmVhdGUoYnV5UGFyYW1zKTsKCiAgICAgICAgfSBjYXRjaCAoVHdpbGlvUmVzdEV4Y2VwdGlvbiBlKSB7CiAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgfQogICAgICAgIHJldHVybiBudWxsOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0QXBwbGljYXRpb25TaWQoKSB0aHJvd3MgVHdpbGlvUmVzdEV4Y2VwdGlvbiB7CiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBwYXJhbXMgPSBuZXcgSGFzaE1hcDw+KCk7CiAgICAgICAgcGFyYW1zLnB1dCgiRnJpZW5kbHlOYW1lIiwgVHdpbGlvU2VydmljZXMuRGVmYXVsdEFwcE5hbWUpOwogICAgICAgIEFwcGxpY2F0aW9uIGFwcCA9IGdldEFjY291bnQoKS5nZXRBcHBsaWNhdGlvbnMocGFyYW1zKS5nZXRQYWdlRGF0YSgpLmdldCgwKTsKCiAgICAgICAgaWYgKGFwcCAhPSBudWxsKSB7CiAgICAgICAgICAgIExpc3Q8TmFtZVZhbHVlUGFpcj4gbmV3QXBwUGFyYW1zID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICAgICAgICAgIG5ld0FwcFBhcmFtcy5hZGQobmV3IEJhc2ljTmFtZVZhbHVlUGFpcigiRnJpZW5kbHlOYW1lIiwgVHdpbGlvU2VydmljZXMuRGVmYXVsdEFwcE5hbWUpKTsKICAgICAgICAgICAgYXBwID0gZ2V0QWNjb3VudCgpLmdldEFwcGxpY2F0aW9uRmFjdG9yeSgpLmNyZWF0ZShuZXdBcHBQYXJhbXMpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGFwcC5nZXRTaWQoKTsKICAgIH0KCiAgICBwcml2YXRlIExpc3Q8QXZhaWxhYmxlUGhvbmVOdW1iZXI+IGdldEF2YWlsYWJsZVBob25lTnVtYmVycyhBY2NvdW50IGFjY291bnQsCiAgICAgICAgTWFwPFN0cmluZywgU3RyaW5nPiBzZWFyY2hQYXJhbXMpIHsKICAgICAgICBBdmFpbGFibGVQaG9uZU51bWJlckxpc3QgcGhvbmVOdW1iZXJzOwogICAgICAgIHBob25lTnVtYmVycyA9IGFjY291bnQuZ2V0QXZhaWxhYmxlUGhvbmVOdW1iZXJzKHNlYXJjaFBhcmFtcywgIlVTIiwgIkxvY2FsIik7CiAgICAgICAgcmV0dXJuIHBob25lTnVtYmVycy5nZXRQYWdlRGF0YSgpOwogICAgfQoKICAgIHByaXZhdGUgQWNjb3VudCBnZXRBY2NvdW50KCkgewogICAgICAgIHJldHVybiBjbGllbnQuZ2V0QWNjb3VudCgpOwogICAgfQoKICAgIHByaXZhdGUgSW5jb21pbmdQaG9uZU51bWJlckZhY3RvcnkgZ2V0SW5jb21pbmdQaG9uZU51bWJlckZhY3RvcnkoKSB7CiAgICAgICAgcmV0dXJuIGdldEFjY291bnQoKS5nZXRJbmNvbWluZ1Bob25lTnVtYmVyRmFjdG9yeSgpOwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/phonenumbers/AvailableServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5waG9uZW51bWJlcnM7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubGliLnNlcnZpY2VzLlR3aWxpb1NlcnZpY2VzOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMuV2ViQXBwU2VydmxldDsKCmltcG9ydCBqYXZheC5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0OwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Db2xsZWN0b3JzOwoKcHVibGljIGNsYXNzIEF2YWlsYWJsZVNlcnZsZXQgZXh0ZW5kcyBXZWJBcHBTZXJ2bGV0IHsKCiAgICBwcml2YXRlIFR3aWxpb1NlcnZpY2VzIHR3aWxpb1NlcnZpY2VzOwoKICAgIHB1YmxpYyBBdmFpbGFibGVTZXJ2bGV0KCkgewogICAgICAgIHRoaXMobmV3IFR3aWxpb1NlcnZpY2VzKCkpOwogICAgfQoKICAgIHB1YmxpYyBBdmFpbGFibGVTZXJ2bGV0KFR3aWxpb1NlcnZpY2VzIHR3aWxpb1NlcnZpY2VzKSB7CiAgICAgICAgdGhpcy50d2lsaW9TZXJ2aWNlcyA9IHR3aWxpb1NlcnZpY2VzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRvR2V0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKQogICAgICAgIHRocm93cyBTZXJ2bGV0RXhjZXB0aW9uLCBJT0V4Y2VwdGlvbiB7CgoKICAgICAgICBTdHJpbmcgYXJlYUNvZGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiYXJlYUNvZGUiKTsKCiAgICAgICAgcmVxdWVzdC5zZXRBdHRyaWJ1dGUoInBob25lTnVtYmVycyIsCiAgICAgICAgICAgIHR3aWxpb1NlcnZpY2VzLnNlYXJjaFBob25lTnVtYmVycyhhcmVhQ29kZSkuc3RyZWFtKCkubGltaXQoMTApCiAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKSk7CiAgICAgICAgcmVxdWVzdC5nZXRSZXF1ZXN0RGlzcGF0Y2hlcigiL2F2YWlsYWJsZV9waG9uZV9udW1iZXJzLmpzcCIpLmZvcndhcmQocmVxdWVzdCwgcmVzcG9uc2UpOwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/leadsources/CreateServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlczsKCmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5saWIuQ29uZmlnOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubGliLnNlcnZpY2VzLlR3aWxpb1NlcnZpY2VzOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWRTb3VyY2U7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5yZXBvc2l0b3JpZXMuTGVhZFNvdXJjZVJlcG9zaXRvcnk7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5XZWJBcHBTZXJ2bGV0OwppbXBvcnQgY29tLnR3aWxpby5zZGsuVHdpbGlvUmVzdEV4Y2VwdGlvbjsKaW1wb3J0IGNvbS50d2lsaW8uc2RrLnJlc291cmNlLmluc3RhbmNlLkluY29taW5nUGhvbmVOdW1iZXI7CgppbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uOwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5PYmplY3RzOwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Db2xsZWN0b3JzOwoKcHVibGljIGNsYXNzIENyZWF0ZVNlcnZsZXQgZXh0ZW5kcyBXZWJBcHBTZXJ2bGV0IHsKCiAgICBwcml2YXRlIExlYWRTb3VyY2VSZXBvc2l0b3J5IGxlYWRTb3VyY2VSZXBvc2l0b3J5OwogICAgcHJpdmF0ZSBUd2lsaW9TZXJ2aWNlcyB0d2lsaW9TZXJ2aWNlczsKCiAgICBwdWJsaWMgQ3JlYXRlU2VydmxldCgpIHsKICAgICAgICB0aGlzKG5ldyBMZWFkU291cmNlUmVwb3NpdG9yeSgpLCBuZXcgVHdpbGlvU2VydmljZXMoKSApOwogICAgfQoKICAgIHB1YmxpYyBDcmVhdGVTZXJ2bGV0KExlYWRTb3VyY2VSZXBvc2l0b3J5IGxlYWRTb3VyY2VSZXBvc2l0b3J5LCBUd2lsaW9TZXJ2aWNlcyB0d2lsaW9TZXJ2aWNlcykgewogICAgICAgIHRoaXMubGVhZFNvdXJjZVJlcG9zaXRvcnkgPSBsZWFkU291cmNlUmVwb3NpdG9yeTsKICAgICAgICB0aGlzLnR3aWxpb1NlcnZpY2VzID0gdHdpbGlvU2VydmljZXM7CiAgICB9CgogICAgcHVibGljIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKQogICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24gewoKICAgICAgICBTdHJpbmcgcGhvbmVOdW1iZXIgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigicGhvbmVOdW1iZXIiKTsKCiAgICAgICAgU3RyaW5nIHR3aW1sQXBwbGljYXRpb25TaWQgPSBDb25maWcuZ2V0VHdpbWxBcHBsaWNhdGlvblNpZCgpOwogICAgICAgIGlmIChPYmplY3RzLmVxdWFscyh0d2ltbEFwcGxpY2F0aW9uU2lkLCAiIikgfHwgKHR3aW1sQXBwbGljYXRpb25TaWQgPT0gbnVsbCkpIHsKICAgICAgICAgICAgdHJ5IHsKICAgICAgICAgICAgICAgIHR3aW1sQXBwbGljYXRpb25TaWQgPSB0d2lsaW9TZXJ2aWNlcy5nZXRBcHBsaWNhdGlvblNpZCgpOwogICAgICAgICAgICB9IGNhdGNoIChUd2lsaW9SZXN0RXhjZXB0aW9uIGUpIHsKICAgICAgICAgICAgICAgIGUucHJpbnRTdGFja1RyYWNlKCk7CiAgICAgICAgICAgIH0KICAgICAgICB9CgogICAgICAgIEluY29taW5nUGhvbmVOdW1iZXIgdHdpbGlvTnVtYmVyID0gdHdpbGlvU2VydmljZXMucHVyY2hhc2VQaG9uZU51bWJlcihwaG9uZU51bWJlcix0d2ltbEFwcGxpY2F0aW9uU2lkKTsKCiAgICAgICAgTGVhZFNvdXJjZSBsZWFkU291cmNlID0gbmV3IExlYWRTb3VyY2UodHdpbGlvTnVtYmVyLmdldEZyaWVuZGx5TmFtZSgpLCB0d2lsaW9OdW1iZXIuZ2V0UGhvbmVOdW1iZXIoKSk7CiAgICAgICAgbGVhZFNvdXJjZSA9IGxlYWRTb3VyY2VSZXBvc2l0b3J5LmNyZWF0ZShsZWFkU291cmNlKTsKCiAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KFN0cmluZy5mb3JtYXQoIi9sZWFkc291cmNlcy9lZGl0P2lkPSVzIiwgbGVhZFNvdXJjZS5nZXRJZCgpKSk7CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5tb2RlbHM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuKjsKaW1wb3J0IGphdmEudXRpbC5BcnJheUxpc3Q7CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCkBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQpARW50aXR5CkBUYWJsZShuYW1lID0gImxlYWRfc291cmNlcyIpCnB1YmxpYyBjbGFzcyBMZWFkU291cmNlIHsKICAgIEBJZAogICAgQEdlbmVyYXRlZFZhbHVlKHN0cmF0ZWd5ID0gR2VuZXJhdGlvblR5cGUuSURFTlRJVFkpCiAgICBAQ29sdW1uKG5hbWUgPSAiaWQiKQogICAgcHJpdmF0ZSBsb25nIGlkOwoKICAgIEBDb2x1bW4obmFtZSA9ICJuYW1lIikKICAgIHByaXZhdGUgU3RyaW5nIG5hbWU7CgogICAgQENvbHVtbihuYW1lID0gImluY29taW5nX251bWJlcl9uYXRpb25hbCIpCiAgICBwcml2YXRlIFN0cmluZyBpbmNvbWluZ051bWJlck5hdGlvbmFsOwoKICAgIEBDb2x1bW4obmFtZSA9ICJpbmNvbWluZ19udW1iZXJfaW50ZXJuYXRpb25hbCIpCiAgICBwcml2YXRlIFN0cmluZyBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWw7CgogICAgQENvbHVtbihuYW1lID0gImZvcndhcmRpbmdfbnVtYmVyIikKICAgIHByaXZhdGUgU3RyaW5nIGZvcndhcmRpbmdOdW1iZXI7CgogICAgQE9uZVRvTWFueShtYXBwZWRCeSA9ICJsZWFkU291cmNlIikKICAgIHByaXZhdGUgTGlzdDxMZWFkPiBsZWFkczsKCiAgICBwdWJsaWMgTGVhZFNvdXJjZSgpIHsKICAgICAgICB0aGlzLmxlYWRzID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICB9CgogICAgcHVibGljIExlYWRTb3VyY2UoU3RyaW5nIG5hbWUsIFN0cmluZyBpbmNvbWluZ051bWJlck5hdGlvbmFsLCBTdHJpbmcgaW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgdGhpcyhpbmNvbWluZ051bWJlck5hdGlvbmFsLCBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpOwogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CgogICAgcHVibGljIExlYWRTb3VyY2UoU3RyaW5nIGluY29taW5nTnVtYmVyTmF0aW9uYWwsIFN0cmluZyBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpIHsKICAgICAgICB0aGlzKCk7CiAgICAgICAgdGhpcy5pbmNvbWluZ051bWJlck5hdGlvbmFsID0gaW5jb21pbmdOdW1iZXJOYXRpb25hbDsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbCA9IGluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbDsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gaWQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SWQobG9uZyBpZCkgewogICAgICAgIHRoaXMuaWQgPSBpZDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRJbmNvbWluZ051bWJlck5hdGlvbmFsKCkgewogICAgICAgIHJldHVybiBpbmNvbWluZ051bWJlck5hdGlvbmFsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEluY29taW5nTnVtYmVyTmF0aW9uYWwoU3RyaW5nIGluY29taW5nTnVtYmVyTmF0aW9uYWwpIHsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVyTmF0aW9uYWwgPSBpbmNvbWluZ051bWJlck5hdGlvbmFsOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKCkgewogICAgICAgIHJldHVybiBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKFN0cmluZyBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpIHsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbCA9IGluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEZvcndhcmRpbmdOdW1iZXIoKSB7CiAgICAgICAgcmV0dXJuIGZvcndhcmRpbmdOdW1iZXI7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Rm9yd2FyZGluZ051bWJlcihTdHJpbmcgZm9yd2FyZGluZ051bWJlcikgewogICAgICAgIHRoaXMuZm9yd2FyZGluZ051bWJlciA9IGZvcndhcmRpbmdOdW1iZXI7CiAgICB9Cn0=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/calltracking/LeadCallServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5jYWxsdHJhY2tpbmc7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWQ7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5tb2RlbHMuTGVhZFNvdXJjZTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnJlcG9zaXRvcmllcy5MZWFkUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnJlcG9zaXRvcmllcy5MZWFkU291cmNlUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnNlcnZsZXRzLldlYkFwcFNlcnZsZXQ7CmltcG9ydCBjb20udHdpbGlvLnNkay52ZXJicy5EaWFsOwppbXBvcnQgY29tLnR3aWxpby5zZGsudmVyYnMuVHdpTUxFeGNlcHRpb247CmltcG9ydCBjb20udHdpbGlvLnNkay52ZXJicy5Ud2lNTFJlc3BvbnNlOwoKaW1wb3J0IGphdmF4LnNlcnZsZXQuU2VydmxldEV4Y2VwdGlvbjsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlcXVlc3Q7CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXNwb25zZTsKaW1wb3J0IGphdmEuaW8uSU9FeGNlcHRpb247CgpwdWJsaWMgY2xhc3MgTGVhZENhbGxTZXJ2bGV0IGV4dGVuZHMgV2ViQXBwU2VydmxldCB7CgogICAgcHJpdmF0ZSBMZWFkU291cmNlUmVwb3NpdG9yeSBsZWFkU291cmNlUmVwb3NpdG9yeTsKICAgIHByaXZhdGUgTGVhZFJlcG9zaXRvcnkgbGVhZFJlcG9zaXRvcnk7CgogICAgcHVibGljIExlYWRDYWxsU2VydmxldCgpIHsKICAgICAgICB0aGlzKG5ldyBMZWFkU291cmNlUmVwb3NpdG9yeSgpLCBuZXcgTGVhZFJlcG9zaXRvcnkoKSk7CiAgICB9CgogICAgcHVibGljIExlYWRDYWxsU2VydmxldChMZWFkU291cmNlUmVwb3NpdG9yeSBsZWFkU291cmNlUmVwb3NpdG9yeSwKICAgICAgICBMZWFkUmVwb3NpdG9yeSBsZWFkUmVwb3NpdG9yeSkgewogICAgICAgIHRoaXMubGVhZFNvdXJjZVJlcG9zaXRvcnkgPSBsZWFkU291cmNlUmVwb3NpdG9yeTsKICAgICAgICB0aGlzLmxlYWRSZXBvc2l0b3J5ID0gbGVhZFJlcG9zaXRvcnk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKQogICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24gewoKICAgICAgICBTdHJpbmcgY2FsbGVkID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoIkNhbGxlZCIpOwogICAgICAgIFN0cmluZyBjYWxsZXIgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiQ2FsbGVyIik7CiAgICAgICAgU3RyaW5nIGNpdHkgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiRnJvbUNpdHkiKTsKICAgICAgICBTdHJpbmcgc3RhdGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiRnJvbVN0YXRlIik7CgogICAgICAgIExlYWRTb3VyY2UgbHMgPSBsZWFkU291cmNlUmVwb3NpdG9yeS5maW5kQnlJbmNvbWluZ051bWJlckludGVybmF0aW9uYWwoY2FsbGVkKTsKICAgICAgICBsZWFkUmVwb3NpdG9yeS5jcmVhdGUobmV3IExlYWQoY2FsbGVyLCAgY2l0eSwgc3RhdGUsIGxzKSk7CgogICAgICAgIFR3aU1MUmVzcG9uc2UgdHdpTUxSZXNwb25zZSA9IG5ldyBUd2lNTFJlc3BvbnNlKCk7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgdHdpTUxSZXNwb25zZS5hcHBlbmQobmV3IERpYWwobHMuZ2V0Rm9yd2FyZGluZ051bWJlcigpKSk7CiAgICAgICAgfSBjYXRjaCAoVHdpTUxFeGNlcHRpb24gZSkgewogICAgICAgICAgICBlLnByaW50U3RhY2tUcmFjZSgpOwogICAgICAgIH0KCiAgICAgICAgcmVzcG9uZFR3aU1MKHJlc3BvbnNlLCB0d2lNTFJlc3BvbnNlKTsKICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/repositories/LeadSourceRepository.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5yZXBvc2l0b3JpZXM7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWRTb3VyY2U7CmltcG9ydCBqYXZhZnguYmVhbnMuYmluZGluZy5PYmplY3RFeHByZXNzaW9uOwoKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLk5vUmVzdWx0RXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLio7CgpwdWJsaWMgY2xhc3MgTGVhZFNvdXJjZVJlcG9zaXRvcnkgZXh0ZW5kcyBSZXBvc2l0b3J5PExlYWRTb3VyY2U+IHsKCiAgICBwdWJsaWMgTGVhZFNvdXJjZVJlcG9zaXRvcnkoKSB7CiAgICAgICAgc3VwZXIoTGVhZFNvdXJjZS5jbGFzcyk7CiAgICB9CgogICAgcHVibGljIExlYWRTb3VyY2UgZmluZEJ5SW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKFN0cmluZyBudW1iZXIpIHsKCiAgICAgICAgTGVhZFNvdXJjZSBsZWFkU291cmNlID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBsZWFkU291cmNlID0gKExlYWRTb3VyY2UpIGdldEVtKCkuY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICAgICAiU0VMRUNUIGUgRlJPTSBMZWFkU291cmNlIGUgV0hFUkUgZS5pbmNvbWluZ051bWJlckludGVybmF0aW9uYWwgPSA6bnVtYmVyIikKICAgICAgICAgICAgICAgIC5zZXRNYXhSZXN1bHRzKDEpLnNldFBhcmFtZXRlcigibnVtYmVyIiwgbnVtYmVyKS5nZXRTaW5nbGVSZXN1bHQoKTsKICAgICAgICB9IGNhdGNoIChOb1Jlc3VsdEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oZXguZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBsZWFkU291cmNlOwogICAgfQoKICAgIHB1YmxpYyBMaXN0PE9iamVjdD4gZmluZExlYWRzQnlMZWFkU291cmNlKCkgewoKICAgICAgICBMaXN0IGl0ZW1zID0gbnVsbDsKICAgICAgICB0cnkgewogICAgICAgICAgICBpdGVtcyA9IGdldEVtKCkuY3JlYXRlUXVlcnkoCiAgICAgICAgICAgICAgICAiU0VMRUNUIHMubmFtZSwgQ09VTlQobCkgRlJPTSBMZWFkU291cmNlIHMgSk9JTiBzLmxlYWRzIGwgR1JPVVAgQlkgcy5uYW1lIikKICAgICAgICAgICAgICAgIC5nZXRSZXN1bHRMaXN0KCk7CiAgICAgICAgfSBjYXRjaCAoTm9SZXN1bHRFeGNlcHRpb24gZXgpIHsKICAgICAgICAgICAgU3lzdGVtLm91dC5wcmludGxuKGV4LmdldE1lc3NhZ2UoKSk7CiAgICAgICAgfQoKICAgICAgICByZXR1cm4gUXVlcnlIZWxwZXIubWFwUmVzdWx0cyhpdGVtcyk7CiAgICB9CgogICAgcHVibGljIExpc3Q8T2JqZWN0PiBmaW5kTGVhZHNCeUNpdHkoKSB7CgogICAgICAgIExpc3QgaXRlbXMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGl0ZW1zID0gZ2V0RW0oKS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJTRUxFQ1QgbC5jaXR5LCBDT1VOVChsKSBGUk9NIExlYWRTb3VyY2UgcyBKT0lOIHMubGVhZHMgbCBHUk9VUCBCWSBsLmNpdHkiKQogICAgICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAgICAgICB9IGNhdGNoIChOb1Jlc3VsdEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oZXguZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBRdWVyeUhlbHBlci5tYXBSZXN1bHRzKGl0ZW1zKTsKICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/webapp/scripts/call-tracking.js" data-mode="javascript">JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgJC5nZXQoIi9zdGF0cy9zb3VyY2UiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIENhbGxUcmFja2luZ0dyYXBoKCIjbGVhZHMtYnktc291cmNlIiwgZGF0YSkuZHJhdygpOwogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgfSk7CgogICAgJC5nZXQoIi9zdGF0cy9jaXR5IiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBDYWxsVHJhY2tpbmdHcmFwaCgiI2xlYWRzLWJ5LWNpdHkiLCBkYXRhKS5kcmF3KCk7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICB9KTsKfSk7CgpDYWxsVHJhY2tpbmdHcmFwaCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgZGF0YSkgewogICAgZnVuY3Rpb24gZ2V0Q29udGV4dCgpIHsKICAgICAgICByZXR1cm4gJChzZWxlY3RvcikuZ2V0KDApLmdldENvbnRleHQoIjJkIik7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgICBkcmF3OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gZ2V0Q29udGV4dChzZWxlY3Rvcik7CiAgICAgICAgICAgIG5ldyBDaGFydChjb250ZXh0KS5QaWUoZGF0YSk7CiAgICAgICAgfQogICAgfQp9Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/call-tracking-servlets" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>