<!DOCTYPE html><html><head><title>Call Tracking</title><style>body, html {
  height:100%;
  width:100%;
  padding:0;
  margin:0;
  overflow:hidden;
  background-color:#ddd;
}
.wrapper {
  height:100%;
  width:100%;
}</style><link rel="shortcut icon" href="//twilio.com/bundles/marketing/img/favicons/favicon.ico"><link rel="apple-touch-icon" href="//twilio.com/bundles/marketing/img/favicons/favicon_57.png"><link rel="apple-touch-icon" sizes="72x72" href="//twilio.com/bundles/marketing/img/favicons/favicon_72.png"><link rel="apple-touch-icon" sizes="114x114" href="//twilio.com/bundles/marketing/img/favicons/favicon_114.png"><link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.2.0/css/font-awesome.min.css"><link rel="stylesheet" href="viewsaurus.css"></head><body><div class="wrapper"><div id="viewsaurus" data-title="Call Tracking"><div class="saurus-panes"><div class="saurus-prose"><div class="saurus-prose-header"><div class="title-outer"><span class="step-title">Call Tracking</span></div></div><div class="saurus-nav-buttons"><div class="saurus-nav-button nav-overview"><div class="saurus-nav-button-inner"><i class="fa fa-fw fa-list"></i></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-previous"><div class="saurus-nav-button-inner"><a href=""> <i class="fa fa-fw fa-play fa-rotate-180"></i></a></div><div class="nav-divider"></div></div><div class="saurus-nav-button nav-next clickable"><div class="saurus-nav-button-inner"><a href="#1"> <i class="fa fa-fw fa-play"></i></a></div></div><div class="saurus-next-title"><span class="next-title-inner"></span></div></div><div class="saurus-progress-bar"></div><div class="saurus-start"><p>Use Twilio to track the effectiveness of your marketing campaigns. Let's get started!</p><a href="#0">Start Tutorial</a></div><div class="saurus-content"><div data-title="Call Tracking with Twilio and Java Servlets" class="chapter"><div data-file="src/main/webapp/WEB-INF/web.xml" data-format="xml" class="step"><h2 id="what-does-this-thing-do-">What Does This Thing Do?</h2>
<p>This Java Servlets web application shows how you can
use Twilio to track the effectiveness of different marketing channels.</p>
<p><img src="//howtodocs.s3.amazonaws.com/call-tracking-home.png" alt="Call tracking home page"></p>
<p>This application has three main features:</p>
<ul>
<li>It purchases phone numbers from Twilio to use in different marketing
campaigns (like a billboard or a bus advertisement)</li>
<li>It forwards incoming calls for those phone numbers to a salesperson</li>
<li>It displays charts showing data about the phone numbers and the calls
they receive</li>
</ul>
<p>In this tutorial, we&#39;ll point out the key bits of code that make this
application work.
<a href="//github.com/twiliodeved/call-tracking-servlets">Check out the project README on
GitHub</a>
to see how to run the code yourself.</p>
<p>Let&#39;s get started! Click the right arrow above to advance to the next
code snippet.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/java/install">Twilio Java helper library</a></li>
<li><a href="//www.twilio.com/docs/api">Twilio REST API docs</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnafd.html">Getting Started with Java Servlets</a></li>
<li><a href="//gradle.org/getting-started-gradle-java/">Getting Started with Gradle Java/JVM</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-highlight="25-38" class="step"><h2 id="search-for-available-phone-numbers">Search for Available Phone Numbers</h2>
<p>Call tracking requires us to search for and buy phone numbers on demand,
associating a specific phone number with a lead source. This class
uses the <a href="//www.twilio.com/docs/java/install">Twilio Java Helper
Library</a>
to search for phone numbers by area code and return a list of numbers
that are available for purchase.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/rest/available-phone-numbers#local-get-basic-example-1">Searching for and buying numbers in Java</a></li>
<li><a href="//www.twilio.com/docs/api/rest/available-phone-numbers">Twilio REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/phonenumbers/AvailableServlet.java" data-highlight="24-37" class="step"><h2 id="display-available-phone-numbers">Display Available Phone Numbers</h2>
<p>We display a form to the user on the app&#39;s home page which allows them to
search for a new phone number by area code. At the controller level we use the
<code>TwilioServices</code> instances we created earlier to actually search for numbers. This
will render the view that contains a list of numbers they can choose to buy.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/howto/search-and-buy">Phone Number Search API</a></li>
<li><a href="//twilio.github.io/twilio-java/">Twilio JavaDocs</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-highlight="40-46" class="step"><h2 id="buy-a-phone-number">Buy a Phone Number</h2>
<p>Our <code>purchasePhoneNumber</code> method takes a phone number as its
sole parameter and uses our Twilio API client to purchase the
available phone number our user chooses.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/rest/available-phone-numbers">Twilio REST API: Available Phone Numbers</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/leadsources/CreateServlet.java" data-highlight="31-48" class="step"><h2 id="associate-a-phone-number-with-a-lead-source">Associate a Phone Number with a Lead Source</h2>
<p>Once we search for and buy a Twilio number, we need to associate it with a
lead source in our database. This is the core of a call tracking application.
Any phone calls to our new Twilio number will be attributed to this source.</p>
</div><div data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" class="step"><h2 id="the-leadsource-model">The LeadSource Model</h2>
<p>The <code>LeadSource</code> model associates a Twilio number to a named lead source
(like &quot;Wall Street Journal Ad&quot; or &quot;Dancing guy with sign&quot;). It also tracks
a phone number to which we&#39;d like all the calls redirected, like your sales
or support help line.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//flywaydb.org/documentation/gradle/migrate.html">Executing Flyway Migrations with Gradle</a></li>
<li><a href="//docs.oracle.com/javase/tutorial/jdbc/basics/index.html">JDBC Basics</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html">JPA Entities Definition</a></li>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh">JPA Entities Relations</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" class="step"><h2 id="the-lead-model">The Lead Model</h2>
<p>A <code>Lead</code> represents a phone call generated by a <code>LeadSource</code>. Each time
somebody calls a phone number associated with a <code>LeadSource</code>, we&#39;ll use the <code>Lead</code> model to
record some of the <a href="//www.twilio.com/docs/api/twiml/twilio_request">data Twilio gives us</a>
about their call.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//docs.oracle.com/javaee/6/tutorial/doc/bnbqa.html#bnbqh">JPA Entities Relations</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/servlets/calltracking/LeadCallServlet.java" data-highlight="32-50" class="step"><h2 id="forward-calls-and-create-leads">Forward Calls and Create Leads</h2>
<p>Whenever a customer calls one of our Twilio numbers, Twilio will send a POST
request to the URL associated with this action (should be
<code>/lead</code>).</p>
<p>We use the incoming call data to create a new <code>Lead</code> for a <code>LeadSource</code>,
then return <a href="//www.twilio.com/docs/api/twiml">TwiML</a> that connects our caller
with the <code>forwardingNumber</code> of our <code>LeadSource</code>.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.twilio.com/docs/api/twiml/twilio_request">Twilio voice request parameters</a></li>
<li><a href="//www.twilio.com/docs/quickstart/java/sms/hello-monkey">Twilio&#39;s TwiML</a></li>
<li><a href="//www.twilio.com/docs/api/twiml/dial">TwiML &lt;Dial&gt; verb</a></li>
</ul>
</div><div data-file="src/main/java/com/twilio/calltracking/repositories/LeadSourceRepository.java" data-highlight="28-41" class="step"><h2 id="get-statistics-about-our-lead-sources">Get Statistics about Our Lead Sources</h2>
<p>One useful statistic we can <a href="//github.com/TwilioDevEd/call-tracking-servlets/blob/a09ece1216927eb866f2f1fc63a542bbdb5274ed/src/main/java/com/twilio/calltracking/servlets/stats/LeadsBySourceServlet.java#L23-L27">get from our data</a>
is how many calls each
<code>LeadSource</code> has received. We query over <code>LeadSource</code> and count its <code>Lead</code> models.</p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.objectdb.com/java/jpa/query/jpql/group">Group Elements in a JPA Query</a></li>
</ul>
</div><div data-file="src/main/webapp/scripts/call-tracking.js" class="step"><h2 id="visualize-our-statistics-with-chart-js">Visualize our statistics with Chart.js</h2>
<p>Back on the home page, we fetch call tracking statistics
<a href="//github.com/TwilioDevEd/call-tracking-servlets/blob/a09ece1216927eb866f2f1fc63a542bbdb5274ed/src/main/java/com/twilio/calltracking/servlets/WebAppServlet.java#L30-L36">in JSON from the
server</a>
using <a href="//www.mkyong.com/java/jackson-2-convert-java-object-to-from-json/">Jackson/ObjectMapper</a>
and <a href="//api.jquery.com/jquery.get/">jQuery</a>.
We display the stats in colorful pie charts we create with <a href="//www.chartjs.org/">Chart.js</a>.</p>
<p><img src="//howtodocs.s3.amazonaws.com/call-tracking-charts.png" alt="Call tracking charts"></p>
<hr>
<p><strong>See also:</strong></p>
<ul>
<li><a href="//www.chartjs.org/">Chart.js</a></li>
</ul>
</div><div data-file="src/main/webapp/scripts/call-tracking.js" class="step"><h2 id="where-to-next-">Where to Next?</h2>
<p>That&#39;s it! Our Java Servlet application is now ready to purchase new phone
numbers, forward incoming calls, and record some statistics for our
business.</p>
<p>If you&#39;re a Java developer working with Twilio, you might enjoy these
other tutorials:</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/server-notifications/java/servlets"><strong>SMS and MMS notifications</strong></a></p>
<p>Build a server notification system that will alert all administrators via SMS when a server outage occurs.</p>
<p><a href="//www.twilio.com/docs/tutorials/walkthrough/click-to-call/java/servlets"><strong>Click To Call</strong></a></p>
<p>Convert web traffic into phone calls with the click of a button.</p>
<h3 id="did-this-help-">Did this help?</h3>
<p>Thanks for checking this tutorial out! If you have any feedback
to share with us, we&#39;d love to hear it. <a href="mailto:deved-oss@twilio.com">Contact the Twilio Developer
Education Team</a> to let us know what you think.</p>
</div></div>
<div class="saurus-files" style="display:none;"><textarea class="saurus-file" data-file="src/main/webapp/WEB-INF/web.xml" data-mode="xml">PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KCgo8d2ViLWFwcCB4bWxucz0iaHR0cDovL2phdmEuc3VuLmNvbS94bWwvbnMvamF2YWVlIgogICAgICAgICB4bWxuczp4c2k9Imh0dHA6Ly93d3cudzMub3JnLzIwMDEvWE1MU2NoZW1hLWluc3RhbmNlIgogICAgICAgICB4c2k6c2NoZW1hTG9jYXRpb249Imh0dHA6Ly9qYXZhLnN1bi5jb20veG1sL25zL2phdmFlZSBodHRwOi8vamF2YS5zdW4uY29tL3htbC9ucy9qYXZhZWUvd2ViLWFwcF8zXzAueHNkIgogICAgICAgICB2ZXJzaW9uPSIzLjAiPgoKICAgIDxjb250ZXh0LXBhcmFtPgogICAgICAgIDxwYXJhbS1uYW1lPmpzcC1pbmhlcml0YW5jZS1wcmVmaXg8L3BhcmFtLW5hbWU+CiAgICAgICAgPHBhcmFtLXZhbHVlPi9XRUItSU5GL2xheW91dHMvPC9wYXJhbS12YWx1ZT4KICAgIDwvY29udGV4dC1wYXJhbT4KCiAgICA8Y29udGV4dC1wYXJhbT4KICAgICAgICA8cGFyYW0tbmFtZT5qc3AtaW5oZXJpdGFuY2Utc3VmZml4PC9wYXJhbS1uYW1lPgogICAgICAgIDxwYXJhbS12YWx1ZT4uanNwPC9wYXJhbS12YWx1ZT4KICAgIDwvY29udGV4dC1wYXJhbT4KCiAgICA8d2VsY29tZS1maWxlLWxpc3Q+CiAgICAgICAgPHdlbGNvbWUtZmlsZT5hdmFpbGFibGVfcGhvbmVfbnVtYmVycy5qc3A8L3dlbGNvbWUtZmlsZT4KICAgIDwvd2VsY29tZS1maWxlLWxpc3Q+CiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPmF2YWlsYWJsZS1waG9uZS1udW1iZXJzPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMucGhvbmVudW1iZXJzLkF2YWlsYWJsZVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+CiAgICA8L3NlcnZsZXQ+CgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5kYXNoYm9hcmQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5EYXNoYm9hcmRTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgoKICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+Y2FsbHRyYWNraW5nLWZvcndhcmRjYWxsPC9zZXJ2bGV0LW5hbWU+CiAgICAgICAgPHNlcnZsZXQtY2xhc3M+Y29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMuY2FsbHRyYWNraW5nLkxlYWRDYWxsU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPmxlYWQtc291cmNlcy1jcmVhdGU8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlcy5DcmVhdGVTZXJ2bGV0PC9zZXJ2bGV0LWNsYXNzPgogICAgPC9zZXJ2bGV0PgoKICAgIDxzZXJ2bGV0PgogICAgICAgIDxzZXJ2bGV0LW5hbWU+bGVhZC1zb3VyY2VzLWVkaXQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlcy5FZGl0U2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldD4KICAgICAgICA8c2VydmxldC1uYW1lPnN0YXRzLWxlYWRzLWNpdHk8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5zdGF0cy5MZWFkc0J5Q2l0eVNlcnZsZXQ8L3NlcnZsZXQtY2xhc3M+CiAgICA8L3NlcnZsZXQ+CgogICAgPHNlcnZsZXQ+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5zdGF0cy1sZWFkcy1zb3VyY2U8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8c2VydmxldC1jbGFzcz5jb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5zdGF0cy5MZWFkc0J5U291cmNlU2VydmxldDwvc2VydmxldC1jbGFzcz4KICAgIDwvc2VydmxldD4KCiAgICA8c2VydmxldC1tYXBwaW5nPgogICAgICAgIDxzZXJ2bGV0LW5hbWU+ZGVmYXVsdDwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vc2NyaXB0cy8qPC91cmwtcGF0dGVybj4KICAgICAgICA8dXJsLXBhdHRlcm4+L2Nzcy8qPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5hdmFpbGFibGUtcGhvbmUtbnVtYmVyczwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vPC91cmwtcGF0dGVybj4KICAgICAgICA8dXJsLXBhdHRlcm4+L3Bob25lLW51bWJlcnM8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPmRhc2hib2FyZDwvc2VydmxldC1uYW1lPgogICAgICAgIDx1cmwtcGF0dGVybj4vZGFzaGJvYXJkPC91cmwtcGF0dGVybj4KICAgIDwvc2VydmxldC1tYXBwaW5nPgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5jYWxsdHJhY2tpbmctZm9yd2FyZGNhbGw8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWQ8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPmxlYWQtc291cmNlcy1jcmVhdGU8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWRzb3VyY2VzL2NyZWF0ZTwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KCiAgICA8c2VydmxldC1tYXBwaW5nPgogICAgICAgIDxzZXJ2bGV0LW5hbWU+bGVhZC1zb3VyY2VzLWVkaXQ8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L2xlYWRzb3VyY2VzL2VkaXQ8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgogICAgPHNlcnZsZXQtbWFwcGluZz4KICAgICAgICA8c2VydmxldC1uYW1lPnN0YXRzLWxlYWRzLWNpdHk8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3N0YXRzL2NpdHk8L3VybC1wYXR0ZXJuPgogICAgPC9zZXJ2bGV0LW1hcHBpbmc+CgoKICAgIDxzZXJ2bGV0LW1hcHBpbmc+CiAgICAgICAgPHNlcnZsZXQtbmFtZT5zdGF0cy1sZWFkcy1zb3VyY2U8L3NlcnZsZXQtbmFtZT4KICAgICAgICA8dXJsLXBhdHRlcm4+L3N0YXRzL3NvdXJjZTwvdXJsLXBhdHRlcm4+CiAgICA8L3NlcnZsZXQtbWFwcGluZz4KPC93ZWItYXBwPgo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/lib/services/TwilioServices.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5saWIuc2VydmljZXM7CgppbXBvcnQgY29tLnR3aWxpby5Ud2lsaW87CmltcG9ydCBjb20udHdpbGlvLmJhc2UuUmVzb3VyY2VTZXQ7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5saWIuQ29uZmlnOwppbXBvcnQgY29tLnR3aWxpby5yZXN0LmFwaS52MjAxMC5hY2NvdW50LkFwcGxpY2F0aW9uOwppbXBvcnQgY29tLnR3aWxpby5yZXN0LmFwaS52MjAxMC5hY2NvdW50LmF2YWlsYWJsZXBob25lbnVtYmVyY291bnRyeS5Mb2NhbDsKaW1wb3J0IGNvbS50d2lsaW8ucmVzdC5hcGkudjIwMTAuYWNjb3VudC5hdmFpbGFibGVwaG9uZW51bWJlcmNvdW50cnkuTG9jYWxSZWFkZXI7CmltcG9ydCBjb20udHdpbGlvLnJlc3QuYXBpLnYyMDEwLmFjY291bnQuaW5jb21pbmdwaG9uZW51bWJlci5Mb2NhbENyZWF0b3I7CmltcG9ydCBjb20udHdpbGlvLnR5cGUuUGhvbmVOdW1iZXI7CgppbXBvcnQgamF2YS51dGlsLkFycmF5TGlzdDsKaW1wb3J0IGphdmEudXRpbC5JdGVyYXRvcjsKaW1wb3J0IGphdmEudXRpbC5MaXN0OwoKQFN1cHByZXNzV2FybmluZ3MoInVudXNlZCIpCnB1YmxpYyBjbGFzcyBUd2lsaW9TZXJ2aWNlcyB7CgogICAgcHJpdmF0ZSBzdGF0aWMgZmluYWwgU3RyaW5nIERFRkFVTFRfQVBQX05BTUUgPSAiQ2FsbCBUcmFja2luZyBBcHAiOwoKICAgIHB1YmxpYyBUd2lsaW9TZXJ2aWNlcygpIHsKICAgICAgICBUd2lsaW8uaW5pdChDb25maWcuZ2V0QWNjb3VudFNpZCgpLCBDb25maWcuZ2V0QXV0aFRva2VuKCkpOwogICAgfQoKICAgIHB1YmxpYyBMaXN0PExvY2FsPiBzZWFyY2hQaG9uZU51bWJlcnMoU3RyaW5nIGFyZWFDb2RlKSB7CgogICAgICAgIExvY2FsUmVhZGVyIGxvY2FsUmVhZGVyID0gTG9jYWwucmVhZCgiVVMiKTsKICAgICAgICBpZiAoYXJlYUNvZGUgIT0gbnVsbCkgewogICAgICAgICAgICBsb2NhbFJlYWRlci5ieUFyZWFDb2RlKEludGVnZXIucGFyc2VJbnQoYXJlYUNvZGUpKTsKICAgICAgICB9CgogICAgICAgIEl0ZXJhdG9yPExvY2FsPiBwaG9uZU51bWJlcnMgPSBsb2NhbFJlYWRlci5leGVjdXRlKCkuaXRlcmF0b3IoKTsKCiAgICAgICAgTGlzdDxMb2NhbD4gcGhvbmVOdW1iZXJzQXNMaXN0ID0gbmV3IEFycmF5TGlzdDw+KCk7CiAgICAgICAgcGhvbmVOdW1iZXJzLmZvckVhY2hSZW1haW5pbmcocGhvbmVOdW1iZXJzQXNMaXN0OjphZGQpOwoKICAgICAgICByZXR1cm4gcGhvbmVOdW1iZXJzQXNMaXN0OwogICAgfQoKICAgIHB1YmxpYyBjb20udHdpbGlvLnJlc3QuYXBpLnYyMDEwLmFjY291bnQuaW5jb21pbmdwaG9uZW51bWJlci5Mb2NhbCBwdXJjaGFzZVBob25lTnVtYmVyKAogICAgICAgICAgICBTdHJpbmcgcGhvbmVOdW1iZXIsIFN0cmluZyBhcHBsaWNhdGlvblNpZCkgewoKICAgICAgICByZXR1cm4gbmV3IExvY2FsQ3JlYXRvcihuZXcgUGhvbmVOdW1iZXIocGhvbmVOdW1iZXIpKQogICAgICAgICAgICAgICAgLnNldFZvaWNlQXBwbGljYXRpb25TaWQoYXBwbGljYXRpb25TaWQpCiAgICAgICAgICAgICAgICAuZXhlY3V0ZSgpOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0QXBwbGljYXRpb25TaWQoKSB7CiAgICAgICAgUmVzb3VyY2VTZXQ8QXBwbGljYXRpb24+IGFwcHMgPSBnZXRBcHBsaWNhdGlvbnMoKTsKCiAgICAgICAgQXBwbGljYXRpb24gYXBwID0gYXBwcy5pdGVyYXRvcigpLmhhc05leHQoKQogICAgICAgICAgICAgICAgPyBhcHBzLml0ZXJhdG9yKCkubmV4dCgpCiAgICAgICAgICAgICAgICA6IEFwcGxpY2F0aW9uLmNyZWF0ZShERUZBVUxUX0FQUF9OQU1FKS5leGVjdXRlKCk7CgogICAgICAgIHJldHVybiBhcHAuZ2V0U2lkKCk7CiAgICB9CgogICAgcHJpdmF0ZSBSZXNvdXJjZVNldDxBcHBsaWNhdGlvbj4gZ2V0QXBwbGljYXRpb25zKCkgewogICAgICAgIHJldHVybiBBcHBsaWNhdGlvbgogICAgICAgICAgICAgICAgLnJlYWQoKQogICAgICAgICAgICAgICAgLmJ5RnJpZW5kbHlOYW1lKERFRkFVTFRfQVBQX05BTUUpCiAgICAgICAgICAgICAgICAuZXhlY3V0ZSgpOwogICAgfQp9Cgo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/phonenumbers/AvailableServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5waG9uZW51bWJlcnM7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubGliLnNlcnZpY2VzLlR3aWxpb1NlcnZpY2VzOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcuc2VydmxldHMuV2ViQXBwU2VydmxldDsKCmltcG9ydCBqYXZheC5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0OwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwppbXBvcnQgamF2YS51dGlsLnN0cmVhbS5Db2xsZWN0b3JzOwoKcHVibGljIGNsYXNzIEF2YWlsYWJsZVNlcnZsZXQgZXh0ZW5kcyBXZWJBcHBTZXJ2bGV0IHsKCiAgICBwcml2YXRlIFR3aWxpb1NlcnZpY2VzIHR3aWxpb1NlcnZpY2VzOwoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgcHVibGljIEF2YWlsYWJsZVNlcnZsZXQoKSB7CiAgICAgICAgdGhpcyhuZXcgVHdpbGlvU2VydmljZXMoKSk7CiAgICB9CgogICAgcHVibGljIEF2YWlsYWJsZVNlcnZsZXQoVHdpbGlvU2VydmljZXMgdHdpbGlvU2VydmljZXMpIHsKICAgICAgICB0aGlzLnR3aWxpb1NlcnZpY2VzID0gdHdpbGlvU2VydmljZXM7CiAgICB9CgogICAgcHVibGljIHZvaWQgZG9HZXQoSHR0cFNlcnZsZXRSZXF1ZXN0IHJlcXVlc3QsIEh0dHBTZXJ2bGV0UmVzcG9uc2UgcmVzcG9uc2UpCiAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHsKCiAgICAgICAgU3RyaW5nIGFyZWFDb2RlID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoImFyZWFDb2RlIik7CgogICAgICAgIHJlcXVlc3Quc2V0QXR0cmlidXRlKCJwaG9uZU51bWJlcnMiLAogICAgICAgICAgICAgICAgdHdpbGlvU2VydmljZXMuc2VhcmNoUGhvbmVOdW1iZXJzKGFyZWFDb2RlKQogICAgICAgICAgICAgICAgICAgICAgICAuc3RyZWFtKCkKICAgICAgICAgICAgICAgICAgICAgICAgLmxpbWl0KDEwKQogICAgICAgICAgICAgICAgICAgICAgICAuY29sbGVjdChDb2xsZWN0b3JzLnRvTGlzdCgpKSk7CgogICAgICAgIHJlcXVlc3QuZ2V0UmVxdWVzdERpc3BhdGNoZXIoIi9hdmFpbGFibGVfcGhvbmVfbnVtYmVycy5qc3AiKS5mb3J3YXJkKHJlcXVlc3QsIHJlc3BvbnNlKTsKICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/leadsources/CreateServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5sZWFkc291cmNlczsKCmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5saWIuQ29uZmlnOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubGliLnNlcnZpY2VzLlR3aWxpb1NlcnZpY2VzOwppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWRTb3VyY2U7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5yZXBvc2l0b3JpZXMuTGVhZFNvdXJjZVJlcG9zaXRvcnk7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5XZWJBcHBTZXJ2bGV0OwppbXBvcnQgY29tLnR3aWxpby5yZXN0LmFwaS52MjAxMC5hY2NvdW50LmluY29taW5ncGhvbmVudW1iZXIuTG9jYWw7CgppbXBvcnQgamF2YXguc2VydmxldC5TZXJ2bGV0RXhjZXB0aW9uOwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVxdWVzdDsKaW1wb3J0IGphdmF4LnNlcnZsZXQuaHR0cC5IdHRwU2VydmxldFJlc3BvbnNlOwppbXBvcnQgamF2YS5pby5JT0V4Y2VwdGlvbjsKaW1wb3J0IGphdmEudXRpbC5PYmplY3RzOwoKcHVibGljIGNsYXNzIENyZWF0ZVNlcnZsZXQgZXh0ZW5kcyBXZWJBcHBTZXJ2bGV0IHsKCiAgICBwcml2YXRlIExlYWRTb3VyY2VSZXBvc2l0b3J5IGxlYWRTb3VyY2VSZXBvc2l0b3J5OwogICAgcHJpdmF0ZSBUd2lsaW9TZXJ2aWNlcyB0d2lsaW9TZXJ2aWNlczsKCiAgICBAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikKICAgIHB1YmxpYyBDcmVhdGVTZXJ2bGV0KCkgewogICAgICAgIHRoaXMobmV3IExlYWRTb3VyY2VSZXBvc2l0b3J5KCksIG5ldyBUd2lsaW9TZXJ2aWNlcygpKTsKICAgIH0KCiAgICBwdWJsaWMgQ3JlYXRlU2VydmxldChMZWFkU291cmNlUmVwb3NpdG9yeSBsZWFkU291cmNlUmVwb3NpdG9yeSwgVHdpbGlvU2VydmljZXMgdHdpbGlvU2VydmljZXMpIHsKICAgICAgICB0aGlzLmxlYWRTb3VyY2VSZXBvc2l0b3J5ID0gbGVhZFNvdXJjZVJlcG9zaXRvcnk7CiAgICAgICAgdGhpcy50d2lsaW9TZXJ2aWNlcyA9IHR3aWxpb1NlcnZpY2VzOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIGRvUG9zdChIdHRwU2VydmxldFJlcXVlc3QgcmVxdWVzdCwgSHR0cFNlcnZsZXRSZXNwb25zZSByZXNwb25zZSkKICAgICAgICAgICAgdGhyb3dzIFNlcnZsZXRFeGNlcHRpb24sIElPRXhjZXB0aW9uIHsKCiAgICAgICAgU3RyaW5nIHBob25lTnVtYmVyID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoInBob25lTnVtYmVyIik7CgogICAgICAgIFN0cmluZyB0d2ltbEFwcGxpY2F0aW9uU2lkID0gQ29uZmlnLmdldFR3aW1sQXBwbGljYXRpb25TaWQoKTsKICAgICAgICBpZiAoT2JqZWN0cy5lcXVhbHModHdpbWxBcHBsaWNhdGlvblNpZCwgIiIpIHx8ICh0d2ltbEFwcGxpY2F0aW9uU2lkID09IG51bGwpKSB7CiAgICAgICAgICAgIHR3aW1sQXBwbGljYXRpb25TaWQgPSB0d2lsaW9TZXJ2aWNlcy5nZXRBcHBsaWNhdGlvblNpZCgpOwogICAgICAgIH0KCiAgICAgICAgTG9jYWwgdHdpbGlvTnVtYmVyID0gdHdpbGlvU2VydmljZXMucHVyY2hhc2VQaG9uZU51bWJlcihwaG9uZU51bWJlciwgdHdpbWxBcHBsaWNhdGlvblNpZCk7CgogICAgICAgIExlYWRTb3VyY2UgbGVhZFNvdXJjZSA9IGxlYWRTb3VyY2VSZXBvc2l0b3J5LmNyZWF0ZShuZXcgTGVhZFNvdXJjZSgKICAgICAgICAgICAgICAgIHR3aWxpb051bWJlci5nZXRGcmllbmRseU5hbWUoKSwKICAgICAgICAgICAgICAgIHR3aWxpb051bWJlci5nZXRQaG9uZU51bWJlcigpLnRvU3RyaW5nKCkpKTsKCiAgICAgICAgcmVzcG9uc2Uuc2VuZFJlZGlyZWN0KFN0cmluZy5mb3JtYXQoIi9sZWFkc291cmNlcy9lZGl0P2lkPSVzIiwgbGVhZFNvdXJjZS5nZXRJZCgpKSk7CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/models/LeadSource.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5tb2RlbHM7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuQ29sdW1uOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuRW50aXR5OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuR2VuZXJhdGlvblR5cGU7CmltcG9ydCBqYXZheC5wZXJzaXN0ZW5jZS5HZW5lcmF0ZWRWYWx1ZTsKaW1wb3J0IGphdmF4LnBlcnNpc3RlbmNlLklkOwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuT25lVG9NYW55OwppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuVGFibGU7CmltcG9ydCBqYXZhLnV0aWwuQXJyYXlMaXN0OwppbXBvcnQgamF2YS51dGlsLkxpc3Q7CgpAU3VwcHJlc3NXYXJuaW5ncygidW51c2VkIikKQEVudGl0eQpAVGFibGUobmFtZSA9ICJsZWFkX3NvdXJjZXMiKQpwdWJsaWMgY2xhc3MgTGVhZFNvdXJjZSB7CgogICAgQElkCiAgICBAR2VuZXJhdGVkVmFsdWUoc3RyYXRlZ3kgPSBHZW5lcmF0aW9uVHlwZS5JREVOVElUWSkKICAgIEBDb2x1bW4obmFtZSA9ICJpZCIpCiAgICBwcml2YXRlIGxvbmcgaWQ7CgogICAgQENvbHVtbihuYW1lID0gIm5hbWUiKQogICAgcHJpdmF0ZSBTdHJpbmcgbmFtZTsKCiAgICBAQ29sdW1uKG5hbWUgPSAiaW5jb21pbmdfbnVtYmVyX25hdGlvbmFsIikKICAgIHByaXZhdGUgU3RyaW5nIGluY29taW5nTnVtYmVyTmF0aW9uYWw7CgogICAgQENvbHVtbihuYW1lID0gImluY29taW5nX251bWJlcl9pbnRlcm5hdGlvbmFsIikKICAgIHByaXZhdGUgU3RyaW5nIGluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbDsKCiAgICBAQ29sdW1uKG5hbWUgPSAiZm9yd2FyZGluZ19udW1iZXIiKQogICAgcHJpdmF0ZSBTdHJpbmcgZm9yd2FyZGluZ051bWJlcjsKCiAgICBAT25lVG9NYW55KG1hcHBlZEJ5ID0gImxlYWRTb3VyY2UiKQogICAgcHJpdmF0ZSBMaXN0PExlYWQ+IGxlYWRzOwoKICAgIHB1YmxpYyBMZWFkU291cmNlKCkgewogICAgICAgIHRoaXMubGVhZHMgPSBuZXcgQXJyYXlMaXN0PD4oKTsKICAgIH0KCiAgICBwdWJsaWMgTGVhZFNvdXJjZSgKICAgICAgICAgICAgU3RyaW5nIG5hbWUsIFN0cmluZyBpbmNvbWluZ051bWJlck5hdGlvbmFsLCBTdHJpbmcgaW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKSB7CiAgICAgICAgdGhpcyhpbmNvbWluZ051bWJlck5hdGlvbmFsLCBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpOwogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CgogICAgcHVibGljIExlYWRTb3VyY2UoU3RyaW5nIGluY29taW5nTnVtYmVyTmF0aW9uYWwsIFN0cmluZyBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpIHsKICAgICAgICB0aGlzKCk7CiAgICAgICAgdGhpcy5pbmNvbWluZ051bWJlck5hdGlvbmFsID0gaW5jb21pbmdOdW1iZXJOYXRpb25hbDsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbCA9IGluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbDsKICAgIH0KCiAgICBwdWJsaWMgbG9uZyBnZXRJZCgpIHsKICAgICAgICByZXR1cm4gaWQ7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SWQobG9uZyBpZCkgewogICAgICAgIHRoaXMuaWQgPSBpZDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldE5hbWUoKSB7CiAgICAgICAgcmV0dXJuIG5hbWU7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0TmFtZShTdHJpbmcgbmFtZSkgewogICAgICAgIHRoaXMubmFtZSA9IG5hbWU7CiAgICB9CgogICAgcHVibGljIFN0cmluZyBnZXRJbmNvbWluZ051bWJlck5hdGlvbmFsKCkgewogICAgICAgIHJldHVybiBpbmNvbWluZ051bWJlck5hdGlvbmFsOwogICAgfQoKICAgIHB1YmxpYyB2b2lkIHNldEluY29taW5nTnVtYmVyTmF0aW9uYWwoU3RyaW5nIGluY29taW5nTnVtYmVyTmF0aW9uYWwpIHsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVyTmF0aW9uYWwgPSBpbmNvbWluZ051bWJlck5hdGlvbmFsOwogICAgfQoKICAgIHB1YmxpYyBTdHJpbmcgZ2V0SW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKCkgewogICAgICAgIHJldHVybiBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWw7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0SW5jb21pbmdOdW1iZXJJbnRlcm5hdGlvbmFsKFN0cmluZyBpbmNvbWluZ051bWJlckludGVybmF0aW9uYWwpIHsKICAgICAgICB0aGlzLmluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbCA9IGluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbDsKICAgIH0KCiAgICBwdWJsaWMgU3RyaW5nIGdldEZvcndhcmRpbmdOdW1iZXIoKSB7CiAgICAgICAgcmV0dXJuIGZvcndhcmRpbmdOdW1iZXI7CiAgICB9CgogICAgcHVibGljIHZvaWQgc2V0Rm9yd2FyZGluZ051bWJlcihTdHJpbmcgZm9yd2FyZGluZ051bWJlcikgewogICAgICAgIHRoaXMuZm9yd2FyZGluZ051bWJlciA9IGZvcndhcmRpbmdOdW1iZXI7CiAgICB9Cn0K</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/servlets/calltracking/LeadCallServlet.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5zZXJ2bGV0cy5jYWxsdHJhY2tpbmc7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWQ7CmltcG9ydCBjb20udHdpbGlvLmNhbGx0cmFja2luZy5tb2RlbHMuTGVhZFNvdXJjZTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnJlcG9zaXRvcmllcy5MZWFkUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnJlcG9zaXRvcmllcy5MZWFkU291cmNlUmVwb3NpdG9yeTsKaW1wb3J0IGNvbS50d2lsaW8uY2FsbHRyYWNraW5nLnNlcnZsZXRzLldlYkFwcFNlcnZsZXQ7CmltcG9ydCBjb20udHdpbGlvLnR3aW1sLkRpYWw7CmltcG9ydCBjb20udHdpbGlvLnR3aW1sLk51bWJlcjsKaW1wb3J0IGNvbS50d2lsaW8udHdpbWwuVm9pY2VSZXNwb25zZTsKCmltcG9ydCBqYXZheC5zZXJ2bGV0LlNlcnZsZXRFeGNlcHRpb247CmltcG9ydCBqYXZheC5zZXJ2bGV0Lmh0dHAuSHR0cFNlcnZsZXRSZXF1ZXN0OwppbXBvcnQgamF2YXguc2VydmxldC5odHRwLkh0dHBTZXJ2bGV0UmVzcG9uc2U7CmltcG9ydCBqYXZhLmlvLklPRXhjZXB0aW9uOwoKcHVibGljIGNsYXNzIExlYWRDYWxsU2VydmxldCBleHRlbmRzIFdlYkFwcFNlcnZsZXQgewoKICAgIHByaXZhdGUgTGVhZFNvdXJjZVJlcG9zaXRvcnkgbGVhZFNvdXJjZVJlcG9zaXRvcnk7CiAgICBwcml2YXRlIExlYWRSZXBvc2l0b3J5IGxlYWRSZXBvc2l0b3J5OwoKICAgIEBTdXBwcmVzc1dhcm5pbmdzKCJ1bnVzZWQiKQogICAgcHVibGljIExlYWRDYWxsU2VydmxldCgpIHsKICAgICAgICB0aGlzKG5ldyBMZWFkU291cmNlUmVwb3NpdG9yeSgpLCBuZXcgTGVhZFJlcG9zaXRvcnkoKSk7CiAgICB9CgogICAgcHVibGljIExlYWRDYWxsU2VydmxldChMZWFkU291cmNlUmVwb3NpdG9yeSBsZWFkU291cmNlUmVwb3NpdG9yeSwKICAgICAgICBMZWFkUmVwb3NpdG9yeSBsZWFkUmVwb3NpdG9yeSkgewogICAgICAgIHRoaXMubGVhZFNvdXJjZVJlcG9zaXRvcnkgPSBsZWFkU291cmNlUmVwb3NpdG9yeTsKICAgICAgICB0aGlzLmxlYWRSZXBvc2l0b3J5ID0gbGVhZFJlcG9zaXRvcnk7CiAgICB9CgogICAgcHVibGljIHZvaWQgZG9Qb3N0KEh0dHBTZXJ2bGV0UmVxdWVzdCByZXF1ZXN0LCBIdHRwU2VydmxldFJlc3BvbnNlIHJlc3BvbnNlKQogICAgICAgICAgICB0aHJvd3MgU2VydmxldEV4Y2VwdGlvbiwgSU9FeGNlcHRpb24gewoKICAgICAgICBTdHJpbmcgY2FsbGVkID0gcmVxdWVzdC5nZXRQYXJhbWV0ZXIoIkNhbGxlZCIpOwogICAgICAgIFN0cmluZyBjYWxsZXIgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiQ2FsbGVyIik7CiAgICAgICAgU3RyaW5nIGNpdHkgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiRnJvbUNpdHkiKTsKICAgICAgICBTdHJpbmcgc3RhdGUgPSByZXF1ZXN0LmdldFBhcmFtZXRlcigiRnJvbVN0YXRlIik7CgogICAgICAgIExlYWRTb3VyY2UgbHMgPSBsZWFkU291cmNlUmVwb3NpdG9yeS5maW5kQnlJbmNvbWluZ051bWJlckludGVybmF0aW9uYWwoY2FsbGVkKTsKICAgICAgICBsZWFkUmVwb3NpdG9yeS5jcmVhdGUobmV3IExlYWQoY2FsbGVyLCAgY2l0eSwgc3RhdGUsIGxzKSk7CgogICAgICAgIE51bWJlciBudW1iZXIgPSBuZXcgTnVtYmVyLkJ1aWxkZXIobHMuZ2V0Rm9yd2FyZGluZ051bWJlcigpKS5idWlsZCgpOwogICAgICAgIFZvaWNlUmVzcG9uc2Ugdm9pY2VSZXNwb25zZSA9IG5ldyBWb2ljZVJlc3BvbnNlLkJ1aWxkZXIoKQogICAgICAgICAgICAgICAgLmRpYWwobmV3IERpYWwuQnVpbGRlcigpLm51bWJlcihudW1iZXIpLmJ1aWxkKCkpCiAgICAgICAgICAgICAgICAuYnVpbGQoKTsKCiAgICAgICAgcmVzcG9uZFR3aU1MKHJlc3BvbnNlLCB2b2ljZVJlc3BvbnNlKTsKICAgIH0KfQo=</textarea>
<textarea class="saurus-file" data-file="src/main/java/com/twilio/calltracking/repositories/LeadSourceRepository.java" data-mode="java">cGFja2FnZSBjb20udHdpbGlvLmNhbGx0cmFja2luZy5yZXBvc2l0b3JpZXM7CgppbXBvcnQgY29tLnR3aWxpby5jYWxsdHJhY2tpbmcubW9kZWxzLkxlYWRTb3VyY2U7CgppbXBvcnQgamF2YXgucGVyc2lzdGVuY2UuTm9SZXN1bHRFeGNlcHRpb247CmltcG9ydCBqYXZhLnV0aWwuTGlzdDsKCnB1YmxpYyBjbGFzcyBMZWFkU291cmNlUmVwb3NpdG9yeSBleHRlbmRzIFJlcG9zaXRvcnk8TGVhZFNvdXJjZT4gewoKICAgIHB1YmxpYyBMZWFkU291cmNlUmVwb3NpdG9yeSgpIHsKICAgICAgICBzdXBlcihMZWFkU291cmNlLmNsYXNzKTsKICAgIH0KCiAgICBwdWJsaWMgTGVhZFNvdXJjZSBmaW5kQnlJbmNvbWluZ051bWJlckludGVybmF0aW9uYWwoU3RyaW5nIG51bWJlcikgewoKICAgICAgICBMZWFkU291cmNlIGxlYWRTb3VyY2UgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGxlYWRTb3VyY2UgPSAoTGVhZFNvdXJjZSkgZ2V0RW0oKS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJTRUxFQ1QgZSBGUk9NIExlYWRTb3VyY2UgZSBXSEVSRSBlLmluY29taW5nTnVtYmVySW50ZXJuYXRpb25hbCA9IDpudW1iZXIiKQogICAgICAgICAgICAgICAgLnNldE1heFJlc3VsdHMoMSkuc2V0UGFyYW1ldGVyKCJudW1iZXIiLCBudW1iZXIpLmdldFNpbmdsZVJlc3VsdCgpOwogICAgICAgIH0gY2F0Y2ggKE5vUmVzdWx0RXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihleC5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIGxlYWRTb3VyY2U7CiAgICB9CgogICAgcHVibGljIExpc3Q8T2JqZWN0PiBmaW5kTGVhZHNCeUxlYWRTb3VyY2UoKSB7CgogICAgICAgIExpc3QgaXRlbXMgPSBudWxsOwogICAgICAgIHRyeSB7CiAgICAgICAgICAgIGl0ZW1zID0gZ2V0RW0oKS5jcmVhdGVRdWVyeSgKICAgICAgICAgICAgICAgICJTRUxFQ1Qgcy5uYW1lLCBDT1VOVChsKSBGUk9NIExlYWRTb3VyY2UgcyBKT0lOIHMubGVhZHMgbCBHUk9VUCBCWSBzLm5hbWUiKQogICAgICAgICAgICAgICAgLmdldFJlc3VsdExpc3QoKTsKICAgICAgICB9IGNhdGNoIChOb1Jlc3VsdEV4Y2VwdGlvbiBleCkgewogICAgICAgICAgICBTeXN0ZW0ub3V0LnByaW50bG4oZXguZ2V0TWVzc2FnZSgpKTsKICAgICAgICB9CgogICAgICAgIHJldHVybiBRdWVyeUhlbHBlci5tYXBSZXN1bHRzKGl0ZW1zKTsKICAgIH0KCiAgICBwdWJsaWMgTGlzdDxPYmplY3Q+IGZpbmRMZWFkc0J5Q2l0eSgpIHsKCiAgICAgICAgTGlzdCBpdGVtcyA9IG51bGw7CiAgICAgICAgdHJ5IHsKICAgICAgICAgICAgaXRlbXMgPSBnZXRFbSgpLmNyZWF0ZVF1ZXJ5KAogICAgICAgICAgICAgICAgIlNFTEVDVCBsLmNpdHksIENPVU5UKGwpIEZST00gTGVhZFNvdXJjZSBzIEpPSU4gcy5sZWFkcyBsIEdST1VQIEJZIGwuY2l0eSIpCiAgICAgICAgICAgICAgICAuZ2V0UmVzdWx0TGlzdCgpOwogICAgICAgIH0gY2F0Y2ggKE5vUmVzdWx0RXhjZXB0aW9uIGV4KSB7CiAgICAgICAgICAgIFN5c3RlbS5vdXQucHJpbnRsbihleC5nZXRNZXNzYWdlKCkpOwogICAgICAgIH0KCiAgICAgICAgcmV0dXJuIFF1ZXJ5SGVscGVyLm1hcFJlc3VsdHMoaXRlbXMpOwogICAgfQp9Cg==</textarea>
<textarea class="saurus-file" data-file="src/main/webapp/scripts/call-tracking.js" data-mode="javascript">JChkb2N1bWVudCkucmVhZHkoZnVuY3Rpb24gKCkgewogICAgJC5nZXQoIi9zdGF0cy9zb3VyY2UiLCBmdW5jdGlvbiAoZGF0YSkgewogICAgICAgIENhbGxUcmFja2luZ0dyYXBoKCIjbGVhZHMtYnktc291cmNlIiwgZGF0YSkuZHJhdygpOwogICAgICAgIGNvbnNvbGUubG9nKGRhdGEpOwogICAgfSk7CgogICAgJC5nZXQoIi9zdGF0cy9jaXR5IiwgZnVuY3Rpb24gKGRhdGEpIHsKICAgICAgICBDYWxsVHJhY2tpbmdHcmFwaCgiI2xlYWRzLWJ5LWNpdHkiLCBkYXRhKS5kcmF3KCk7CiAgICAgICAgY29uc29sZS5sb2coZGF0YSk7CiAgICB9KTsKfSk7CgpDYWxsVHJhY2tpbmdHcmFwaCA9IGZ1bmN0aW9uIChzZWxlY3RvciwgZGF0YSkgewogICAgZnVuY3Rpb24gZ2V0Q29udGV4dCgpIHsKICAgICAgICByZXR1cm4gJChzZWxlY3RvcikuZ2V0KDApLmdldENvbnRleHQoIjJkIik7CiAgICB9CgogICAgcmV0dXJuIHsKICAgICAgICBkcmF3OiBmdW5jdGlvbiAoKSB7CiAgICAgICAgICAgIHZhciBjb250ZXh0ID0gZ2V0Q29udGV4dChzZWxlY3Rvcik7CiAgICAgICAgICAgIG5ldyBDaGFydChjb250ZXh0KS5QaWUoZGF0YSk7CiAgICAgICAgfQogICAgfQp9Cg==</textarea>
</div>
</div><div class="saurus-overview"><ul></ul></div></div><div class="saurus-code"><div class="file-path"><span class="crumb-container"></span><i class="fa fa-fw fa-folder"></i></div><div class="saurus-editor"></div></div><div class="saurus-explorer"><div class="saurus-file-list"></div><a href="https://github.com/TwilioDevEd/call-tracking-servlets" target="_blank" class="explorer-get-code"> <i class="fa fa-lg fa-github-square"> </i>View Code on GitHub</a></div></div></div></div><script src="//ajax.googleapis.com/ajax/libs/jquery/1.11.2/jquery.min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/underscore.js/1.8.3/underscore-min.js"></script><script src="//cdnjs.cloudflare.com/ajax/libs/backbone.js/1.1.2/backbone-min.js"></script><script src="ace/ace.js"></script><script src="ace/theme-monokai.js"></script><script src="viewsaurus.js"></script></body></html>